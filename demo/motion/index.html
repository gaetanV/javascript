<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
        
        <title >Motion</title>
        <link href="./content/style.css" rel="stylesheet" />

        <script src="../../src/math/angle.js"></script>
        <script src="../../src/math/number.js"></script>
        <script src="../../src/math/point.js"></script>
        <script src="../../src/math/vector.js"></script>

        <script src="../../src/motion/marker.js"></script>
        <script src="../../src/motion/motion.js"></script>
        <script src="../../src/motion/pointer.js"></script>
        <link href="../../src/motion/pointer.css" rel="stylesheet" />

        <link href="./animal/animal.css" rel="stylesheet" />
        <script src="./animal/animal.js"></script>
        <script src="./animal/animalCollection.js"></script>
        
        <link href="./score/score.css" rel="stylesheet" />
        <script src="./score/score.js"></script>
    </head>
    <body>
        <section id="front"></section>
        <script>
            var aCollection = new animalCollection();
            var aScore = new score();
            var graphMotion = new motion();
            ratio();
            window.onresize = function () {
                ratio();
            };
            function ratio() {
                var bodyWidth = document.body.clientWidth;
                var ratio = bodyWidth / 1920;

                aCollection.setRatio(ratio);
                graphMotion.setRatio(ratio);
            }
            graphMotion.mouseFollow(aCollection.list[1].points, callback);

            function callback(e) {
                var result = 400 + Math.round(graphMotion.userPrecision / 100000);

                aScore.addScore(
                        result > 0 ? result : -10
                        );

                aCollection.addAnimal();
                aCollection.move();
                graphMotion.mouseFollow(aCollection.list[1].points, callback);
            }

            document.addEventListener('mousemove', move);
            var pPosition = new Array();
            function move(e) {
                if (pPosition.length === 500) {

                    document.removeEventListener('mousemove', move)

                } else {
                    var position = {
                        x: e.pageX,
                        y: e.pageY
                    }
                    pPosition.push(position);
                }
            }
            ;

        </script>

    </body>
</html>